var RactiveEditor =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/plugin.tsx");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/controls.tsx":
/*!**************************!*\
  !*** ./src/controls.tsx ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EditorControls; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _thumb_recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./thumb-recorder */ \"./src/thumb-recorder.tsx\");\n/* harmony import */ var _object_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./object-map */ \"./src/object-map.tsx\");\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./recorder */ \"./src/recorder.tsx\");\n/* harmony import */ var _recorders_audio_recorder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./recorders/audio-recorder */ \"./src/recorders/audio-recorder.tsx\");\n/* harmony import */ var _recorders_cursor_recorder__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./recorders/cursor-recorder */ \"./src/recorders/cursor-recorder.tsx\");\n/* harmony import */ var _recorders_cue_recorder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./recorders/cue-recorder */ \"./src/recorders/cue-recorder.tsx\");\n/* harmony import */ var _recorders_key_recorder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./recorders/key-recorder */ \"./src/recorders/key-recorder.tsx\");\n/* harmony import */ var _recorders_input_recorder__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./recorders/input-recorder */ \"./src/recorders/input-recorder.tsx\");\n/* harmony import */ var _recorders_play_recorder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./recorders/play-recorder */ \"./src/recorders/play-recorder.tsx\");\n/* harmony import */ var _recorders_state_recorder__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./recorders/state-recorder */ \"./src/recorders/state-recorder.tsx\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/dom */ \"./src/utils/dom.ts\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_12__);\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst { bind, constrain } = ractive_player__WEBPACK_IMPORTED_MODULE_12__[\"Utils\"].misc, { formatTimeMs } = ractive_player__WEBPACK_IMPORTED_MODULE_12__[\"Utils\"].time;\nclass EditorControls extends ractive_player__WEBPACK_IMPORTED_MODULE_12__[\"Player\"].PureReceiver {\n    componentDidMount() {\n        const { playback } = this.props.player;\n        playback.hub.on('seek', () => this.forceUpdate());\n        playback.hub.on('timeupdate', () => this.forceUpdate());\n    }\n    render() {\n        const { playback, script } = this.props.player;\n        const since = script.slides[script.slideIndex][1];\n        const activeAudio = Object(_utils_dom__WEBPACK_IMPORTED_MODULE_11__[\"$$\"])('audio').filter(audio => !audio.paused)[0];\n        const audioProgress = activeAudio ? activeAudio.currentTime * 1000 : 0;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"editor-controls\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](ractive_player__WEBPACK_IMPORTED_MODULE_12__[\"Player\"].Broadcaster, null,\n                false && react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"rp-audio-progress\" }, formatTimeMs(audioProgress)),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"rp-duration\" }, formatTimeMs(playback.currentTime - since)),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"rp-controls-slidename\" }, script.slideName),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_object_map__WEBPACK_IMPORTED_MODULE_2__[\"default\"], null),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_thumb_recorder__WEBPACK_IMPORTED_MODULE_1__[\"default\"], null),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_recorder__WEBPACK_IMPORTED_MODULE_3__[\"RecorderComponent\"], { ref: $component => this.$recorderComponent = $component, plugins: [\n                        _recorders_cue_recorder__WEBPACK_IMPORTED_MODULE_6__[\"CueRecorderPlugin\"], _recorders_audio_recorder__WEBPACK_IMPORTED_MODULE_4__[\"AudioRecorderPlugin\"], _recorders_cursor_recorder__WEBPACK_IMPORTED_MODULE_5__[\"CursorRecorderPlugin\"],\n                        _recorders_key_recorder__WEBPACK_IMPORTED_MODULE_7__[\"KeyRecorderPlugin\"], _recorders_input_recorder__WEBPACK_IMPORTED_MODULE_8__[\"InputRecorderPlugin\"], _recorders_play_recorder__WEBPACK_IMPORTED_MODULE_9__[\"PlayRecorderPlugin\"],\n                        _recorders_state_recorder__WEBPACK_IMPORTED_MODULE_10__[\"StateRecorderPlugin\"]\n                    ] }))));\n    }\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/controls.tsx?");

/***/ }),

/***/ "./src/draggable.ts":
/*!**************************!*\
  !*** ./src/draggable.ts ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/dom */ \"./src/utils/dom.ts\");\n\nconst { screenToSVGVector } = ractive_player__WEBPACK_IMPORTED_MODULE_0__[\"Utils\"].graphics, { dragHelper } = ractive_player__WEBPACK_IMPORTED_MODULE_0__[\"Utils\"].interactivity;\n\nconst { $, $$ } = _utils_dom__WEBPACK_IMPORTED_MODULE_1__;\nconst global = window;\nconst Editor = {\n    makeDraggable(node) {\n        let lastX, lastY, coordsBox;\n        if (node instanceof HTMLElement || node instanceof SVGSVGElement)\n            node.style.position = 'absolute';\n        if (node instanceof HTMLElement || node instanceof SVGSVGElement)\n            node.addEventListener('mousedown', dragHelper(mouseMoveHTML, mouseDown, mouseUp));\n        else\n            node.addEventListener('mousedown', dragHelper(mouseMoveSVG, mouseDown, mouseUp));\n        function mouseDown(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            lastX = e.pageX;\n            lastY = e.pageY;\n            coordsBox = _utils_dom__WEBPACK_IMPORTED_MODULE_1__[\"elt\"]('span');\n            coordsBox.className = 'coordinates-box';\n            let left, top;\n            if (node instanceof HTMLElement || node instanceof SVGSVGElement) {\n                left = Math.round(parseFloat(node.style.left.slice(0, -4)) / ractive_player__WEBPACK_IMPORTED_MODULE_0__[\"aspectRatio\"]),\n                    top = Math.round(parseFloat(node.style.top.slice(0, -4)) / ractive_player__WEBPACK_IMPORTED_MODULE_0__[\"aspectRatio\"]);\n            }\n            else {\n                left = node.getAttribute(svgXAttr(node)),\n                    top = node.getAttribute(svgYAttr(node));\n            }\n            coordsBox.textContent = `(${left},${top})`;\n            document.body.appendChild(coordsBox);\n        }\n        function mouseMoveHTML(e) {\n            const offset = offsetParent(node);\n            const x = offset.left + e.pageX - lastX, y = offset.top + e.pageY - lastY, vmin = Math.min(innerWidth, innerHeight) / 100, left = x / vmin, top = y / vmin;\n            lastX = e.pageX;\n            lastY = e.pageY;\n            Object.assign(node.style, {\n                left: `${left}vmin`,\n                top: `${top}vmin`\n            });\n            coordsBox.textContent = `(${Math.round(left / ractive_player__WEBPACK_IMPORTED_MODULE_0__[\"aspectRatio\"])}, ${Math.round(top / ractive_player__WEBPACK_IMPORTED_MODULE_0__[\"aspectRatio\"])})`;\n        }\n        function mouseMoveSVG(e) {\n            if (!assertSVG(node))\n                return;\n            const [dx, dy] = screenToSVGVector(svgParent(node), e.pageX - lastX, e.pageY - lastY);\n            lastX = e.pageX;\n            lastY = e.pageY;\n            if (node instanceof SVGGElement) {\n                const t = node.transform.baseVal;\n                window.t = t;\n                if (t.numberOfItems === 0) {\n                    t.appendItem(node.ownerSVGElement.createSVGTransform());\n                }\n                t.consolidate();\n                const m = t.getItem(0).matrix;\n                m.e += dx, m.f += dy;\n                coordsBox.textContent = `(${Math.round(m.e)}, ${Math.round(m.f)})`;\n            }\n            else {\n                const x = parseFloat(node.getAttribute(svgXAttr(node))), y = parseFloat(node.getAttribute(svgYAttr(node)));\n                node.setAttribute(svgXAttr(node), (x + dx).toString());\n                node.setAttribute(svgYAttr(node), (y + dy).toString());\n                coordsBox.textContent = `(${Math.round(x + dx)}, ${Math.round(y + dy)})`;\n            }\n        }\n        function mouseUp(e) {\n            _utils_dom__WEBPACK_IMPORTED_MODULE_1__[\"remove\"](coordsBox);\n            lastX = lastY = null;\n        }\n    }\n};\nfunction svgXAttr(node) {\n    switch (node.nodeName) {\n        case 'circle':\n            return 'cx';\n        default:\n            return 'x';\n    }\n}\nfunction svgYAttr(node) {\n    switch (node.nodeName) {\n        case 'circle':\n            return 'cy';\n        default:\n            return 'y';\n    }\n}\nfunction svgParent(node) {\n    let parent = node;\n    while (parent = parent.parentNode)\n        if (parent.nodeName.toLowerCase() === 'svg')\n            return parent;\n}\nfunction offsetParent(node) {\n    if (typeof node.offsetLeft !== 'undefined' && typeof node.offsetTop !== 'undefined')\n        return { left: node.offsetLeft, top: node.offsetTop };\n    const rect = node.getBoundingClientRect();\n    let parent = node;\n    while (parent = parent.parentNode) {\n        if (parent.nodeName.toLowerCase() === 'main') {\n            console.log(\"MAIN\");\n        }\n        if (!['absolute', 'relative'].includes(getComputedStyle(parent).position))\n            continue;\n        const prect = parent.getBoundingClientRect();\n        return { left: rect.left - prect.left, top: rect.top - prect.top };\n    }\n    return { left: rect.left, top: rect.top };\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (function () {\n    global._edit = { \"data-ractive-editor-draggable\": \"yes\" };\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        $$('*[data-ractive-editor-draggable]').forEach(Editor.makeDraggable);\n    });\n});\nfunction assertHTML(node) {\n    return true;\n}\nfunction assertSVG(node) {\n    return true;\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/draggable.ts?");

/***/ }),

/***/ "./src/object-map.tsx":
/*!****************************!*\
  !*** ./src/object-map.tsx ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ObjectMap; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/dom */ \"./src/utils/dom.ts\");\n\n\nconst { bind } = ractive_player__WEBPACK_IMPORTED_MODULE_1__[\"Utils\"].misc;\n\nconst STYLES = [\n    'left', 'top', 'position', 'height', 'width'\n];\nclass ObjectMap extends react__WEBPACK_IMPORTED_MODULE_0__[\"PureComponent\"] {\n    constructor(props) {\n        super(props);\n        bind(this, ['copyData', 'togglePane']);\n        this.state = {\n            data: {},\n            paneOpen: false\n        };\n    }\n    async copyData() {\n        const map = window[Symbol.for('XXX hack IdMap')];\n        if (!map) {\n            console.log(\"This feature is still a hacky mess. Must set window[@XXX hack IdMap]\");\n            return;\n        }\n        const data = {};\n        for (const id of Object.keys(map).sort()) {\n            const node = Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__[\"$\"])(`#${id}`);\n            data[id] = node ? reactify(node) : map[id];\n        }\n        const id32 = document.location.pathname.split('/')[2];\n        const file = await fetch(`/d/editor/${id32}/save_object`, {\n            body: JSON.stringify(data),\n            headers: [\n                ['Content-Type', 'application/json'],\n                [\"X-Requested-With\", \"XMLHttpRequest\"],\n                [\"X-CSRF-Token\", window.csrfToken]\n            ],\n            method: 'POST'\n        });\n        const text = await file.text();\n        console.log(text);\n    }\n    togglePane() {\n        this.setState({\n            paneOpen: !this.state.paneOpen\n        });\n    }\n    render() {\n        const { paneOpen } = this.state;\n        const dialogStyle = {\n            display: paneOpen ? 'block' : 'none'\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: \"editor-objects-thing\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: \"editor-objects-dialog\", style: dialogStyle },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { readOnly: true, value: JSON.stringify(this.state.data, null, 2) }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"button\", { onClick: this.copyData }, \"Update data\")),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { onClick: this.togglePane, height: \"36\", width: \"36\", viewBox: \"0 0 100 100\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"text\", { dominantBaseline: \"middle\", fill: \"#FFF\", fontFamily: \"Verdana\", textAnchor: \"middle\", x: 50, y: 50, fontSize: 50 }, `{}`))));\n    }\n}\nfunction reactify(node) {\n    const ret = {};\n    const allowedAttributes = ['transform'];\n    for (const attr of Array.from(node.attributes)) {\n        if (!attr.specified)\n            continue;\n        if (!allowedAttributes.includes(attr.nodeName))\n            continue;\n        ret[attr.nodeName] = attr.textContent;\n    }\n    if (node.style) {\n        ret.style = {};\n        for (let i = 0; i < node.style.length; ++i) {\n            const prop = node.style.item(i);\n            if (!STYLES.includes(prop))\n                continue;\n            ret.style[dashToCamel(prop)] = node.style[prop];\n        }\n    }\n    return ret;\n}\nfunction dashToCamel(str) {\n    return str.split('-')\n        .map((s, i) => i === 0 ? s : s[0].toUpperCase() + s.slice(1))\n        .join('');\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/object-map.tsx?");

/***/ }),

/***/ "./src/plugin.tsx":
/*!************************!*\
  !*** ./src/plugin.tsx ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _controls__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./controls */ \"./src/controls.tsx\");\n/* harmony import */ var _draggable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./draggable */ \"./src/draggable.ts\");\n\n\n\nclass EditorPlugin {\n    constructor() {\n        this.recorders = {};\n    }\n    setup(hook) {\n        hook('classNames', () => 'editor');\n        hook('canvasClick', () => false);\n        hook('controls', () => {\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_controls__WEBPACK_IMPORTED_MODULE_1__[\"default\"], { key: \"rpe\" }));\n        });\n        Object(_draggable__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (new EditorPlugin());\n\n\n//# sourceURL=webpack://RactiveEditor/./src/plugin.tsx?");

/***/ }),

/***/ "./src/polyfills.ts":
/*!**************************!*\
  !*** ./src/polyfills.ts ***!
  \**************************/
/*! exports provided: requestFullScreen, exitFullScreen, isFullScreen, onFullScreenChange */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"requestFullScreen\", function() { return requestFullScreen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"exitFullScreen\", function() { return exitFullScreen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isFullScreen\", function() { return isFullScreen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onFullScreenChange\", function() { return onFullScreenChange; });\nfunction requestFullScreen() {\n    for (const method of ['webkitRequestFullscreen', 'mozRequestFullScreen', 'msRequestFullscreen'])\n        if (document.body[method])\n            return document.body[method]();\n}\nfunction exitFullScreen() {\n    for (const method of ['webkitExitFullscreen', 'mozCancelFullScreen', 'msExitFullscreen'])\n        if (document[method])\n            return document[method]();\n}\nfunction isFullScreen() {\n    for (const prop of ['webkitIsFullScreen', 'mozFullScreen'])\n        if (document[prop] !== undefined)\n            return document[prop];\n}\nfunction onFullScreenChange(callback) {\n    for (const event of ['webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange'])\n        document.addEventListener(event, callback);\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/polyfills.ts?");

/***/ }),

/***/ "./src/recorder.tsx":
/*!**************************!*\
  !*** ./src/recorder.tsx ***!
  \**************************/
/*! exports provided: RecorderConfigureComponent, RecorderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RecorderConfigureComponent\", function() { return RecorderConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RecorderComponent\", function() { return RecorderComponent; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/events */ \"./src/utils/events.ts\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst { bind } = ractive_player__WEBPACK_IMPORTED_MODULE_2__[\"Utils\"].misc;\nclass RecorderConfigureComponent extends react__WEBPACK_IMPORTED_MODULE_0__[\"PureComponent\"] {\n    constructor(props) {\n        super(props);\n        bind(this, ['toggleActive']);\n        this.state = {\n            active: false\n        };\n    }\n    toggleActive() {\n        this.props.setPluginActive(!this.state.active);\n        this.setState({ active: !this.state.active });\n    }\n}\nclass RecorderComponent extends ractive_player__WEBPACK_IMPORTED_MODULE_2__[\"Player\"].PureReceiver {\n    constructor(props) {\n        super(props);\n        this.plugins = props.plugins;\n        this.player = props.player;\n        this.isPluginActive = {};\n        this.pluginMap = {};\n        for (const plugin of this.plugins) {\n            this.pluginMap[plugin.name] = plugin;\n            this.isPluginActive[plugin.name] = false;\n        }\n        this.activeRecorders = new Map();\n        bind(this, ['togglePane', 'onKeyDown', 'beginRecording', 'endRecording']);\n        this.state = {\n            isPaneOpen: false,\n            isRecording: false,\n            recordings: [],\n            paused: false\n        };\n    }\n    componentDidMount() {\n        Object(_utils_events__WEBPACK_IMPORTED_MODULE_1__[\"on\"])(document.body, 'keydown', this.onKeyDown);\n        Object(_utils_events__WEBPACK_IMPORTED_MODULE_1__[\"on\"])(window, 'beforeunload', (e) => {\n            if (this.state.recordings.length > 0)\n                e.returnValue = \"You have recording data\";\n        });\n    }\n    onKeyDown(e) {\n        if (!this.player.$controls.captureKeys)\n            return;\n        if (e.code === 'Digit2' && e.altKey && e.metaKey) {\n            this.state.isRecording ? this.endRecording(true) : this.beginRecording();\n        }\n        if (e.code === 'Digit3' && e.altKey && e.metaKey && this.state.isRecording) {\n            this.state.paused ? this.resumeRecording() : this.pauseRecording();\n        }\n        else if (e.code === 'Digit4' && e.altKey && e.metaKey && this.state.isRecording) {\n            this.endRecording(false);\n        }\n    }\n    beginRecording() {\n        const baseTime = performance.now();\n        this.activeRecorders.clear();\n        for (const plugin of this.plugins) {\n            if (!this.isPluginActive[plugin.name])\n                continue;\n            const recorder = new plugin.recorder(this.player);\n            recorder.beginRecording(baseTime);\n            this.activeRecorders.set(plugin, recorder);\n        }\n        if (this.activeRecorders.size === 0)\n            alert('No recorders active!');\n        this.setState({\n            isRecording: true\n        });\n    }\n    pauseRecording() {\n        const time = performance.now();\n        for (const plugin of this.plugins) {\n            if (!this.isPluginActive[plugin.name])\n                continue;\n            this.activeRecorders.get(plugin).pauseRecording(time);\n        }\n        this.setState({ paused: true });\n    }\n    resumeRecording() {\n        const time = performance.now();\n        for (const plugin of this.plugins) {\n            if (!this.isPluginActive[plugin.name])\n                continue;\n            this.activeRecorders.get(plugin).resumeRecording(time);\n        }\n        this.setState({ paused: false });\n    }\n    endRecording(save) {\n        const time = performance.now();\n        const recording = {};\n        for (const plugin of this.plugins) {\n            if (!this.isPluginActive[plugin.name])\n                continue;\n            const promise = this.activeRecorders.get(plugin).endRecording(time);\n            if (!save)\n                continue;\n            recording[plugin.name] = void 0;\n            promise.then(value => {\n                console.log('done recording ' + plugin.name);\n                recording[plugin.name] = value;\n                this.forceUpdate();\n            });\n        }\n        this.setState({\n            isRecording: false,\n            recordings: save ? this.state.recordings.concat([recording]) : this.state.recordings\n        });\n    }\n    togglePane() {\n        this.setState({\n            isPaneOpen: !this.state.isPaneOpen\n        });\n    }\n    render() {\n        const dialogStyle = {\n            display: this.state.isPaneOpen ? 'block' : 'none'\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: \"editor-recorder\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: \"editor-recorder-dialog\", style: dialogStyle },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"table\", { id: \"editor-recorder-commands\" },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tbody\", null,\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", null,\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", null,\n                                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"kbd\", null, \"Alt+Cmd+2\")),\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", null, \"Start/Stop recording\")),\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", null,\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", null,\n                                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"kbd\", null, \"Alt+Cmd+3\")),\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", null, \"Pause/Resume recording\")),\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", null,\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", null,\n                                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"kbd\", null, \"Alt+Cmd+4\")),\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", null, \"Discard recording\")))),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](ractive_player__WEBPACK_IMPORTED_MODULE_2__[\"Player\"].Broadcaster, null,\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"h3\", null, \"Configuration\"),\n                    this.plugins.map((plugin, i) => {\n                        const Component = plugin.configureComponent;\n                        const setPluginActive = (val) => this.isPluginActive[plugin.name] = val;\n                        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](Component, Object.assign({ key: i }, { setPluginActive })));\n                    }),\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"h3\", null, \"Saved data\"),\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"ol\", { className: \"recordings\" }, this.state.recordings.map((recording, i) => (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](RecordingRow, { key: i, data: recording, pluginMap: this.pluginMap })))))),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { onClick: this.togglePane, height: \"36\", width: \"36\", viewBox: \"-50 -50 100 100\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"circle\", { cx: \"0\", cy: \"0\", r: \"35\", stroke: \"white\", strokeWidth: \"5\", fill: this.state.isRecording ? (this.state.paused ? \"blue\" : \"red\") : \"#666\" }))));\n    }\n}\nclass RecordingRow extends ractive_player__WEBPACK_IMPORTED_MODULE_2__[\"Player\"].Receiver {\n    constructor(props) {\n        super(props);\n        this.player = props.player;\n        console.log(this.props);\n        this.state = {\n            name: \"Untitled\"\n        };\n    }\n    render() {\n        const { data, pluginMap } = this.props;\n        const receiveKeyInput = {\n            onFocus: () => this.player.$controls.captureKeys = false,\n            onBlur: () => this.player.$controls.captureKeys = true\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"li\", { className: \"recording-row\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", Object.assign({}, receiveKeyInput, { className: \"recording-name\", onChange: e => this.setState({ name: e.target.value }), type: \"text\", value: this.state.name })),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"table\", { className: \"recording-results\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tbody\", null, Object.keys(data).map(pluginName => {\n                    const plugin = pluginMap[pluginName], PluginComponent = plugin.saveComponent;\n                    return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", { key: pluginName },\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](PluginComponent, { data: data[pluginName] })));\n                })))));\n    }\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorder.tsx?");

/***/ }),

/***/ "./src/recorders/audio-recorder.tsx":
/*!******************************************!*\
  !*** ./src/recorders/audio-recorder.tsx ***!
  \******************************************/
/*! exports provided: AudioRecorder, AudioConfigureComponent, AudioSaveComponent, AudioRecorderPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AudioRecorder\", function() { return AudioRecorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AudioConfigureComponent\", function() { return AudioConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AudioSaveComponent\", function() { return AudioSaveComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AudioRecorderPlugin\", function() { return AudioRecorderPlugin; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../recorder */ \"./src/recorder.tsx\");\n/* harmony import */ var _utils_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/events */ \"./src/utils/events.ts\");\n\n\n\nconst audioIcon = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { x: \"0\", y: \"10\", height: \"80\", viewBox: \"0 0 462.86 792.01\" },\n    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"g\", { stroke: \"#FFF\", transform: \"translate(-140.62 -173.21)\" },\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { opacity: \".99\", d: \"m568.57 620.93c0 116.77-94.66 211.43-211.43 211.43s-211.43-94.66-211.43-211.43v-0.00001\", fillOpacity: \"0\", transform: \"translate(14.904)\", strokeLinecap: \"round\", strokeWidth: \"20\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { opacity: \".99\", d: \"m568.57 620.93c0 116.77-94.66 211.43-211.43 211.43s-211.43-94.66-211.43-211.43v-0.00001\", fillOpacity: \"0\", transform: \"translate(14.904)\", strokeLinecap: \"round\", strokeWidth: \"40\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { d: \"m372.05 832.36v114.29\", strokeWidth: \"30\", fill: \"none\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { fill: \"#FFF\", opacity: \".99\", d: \"m197.14 920.93c0.00001-18.935 59.482-34.286 132.86-34.286 73.375 0 132.86 15.35 132.86 34.286z\", transform: \"translate(42.047 34.286)\", strokeLinecap: \"round\", strokeWidth: \"20\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { fill: \"#FFF\", opacity: \".99\", strokeWidth: \"21.455\", strokeLinecap: \"round\", d: \"m372.06 183.94c-77.019-0.00001-139.47 62.45-139.47 139.47v289.62c0 77.019 62.45 139.47 139.47 139.47 77.019 0 139.44-62.45 139.44-139.47v-289.62c0-77.02-62.42-139.47-139.44-139.47z\" }))));\nclass AudioRecorder {\n    beginRecording(baseTime) {\n        if (document.location.protocol !== 'https:')\n            alert(\"Page must be accessed via HTTPS in order to record audio\");\n        this.promise = new Promise(async (resolve, reject) => {\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            const chunks = [];\n            this.recorder = new MediaRecorder(stream);\n            Object(_utils_events__WEBPACK_IMPORTED_MODULE_2__[\"on\"])(this.recorder, 'dataavailable', (e) => {\n                chunks.push(e.data);\n            });\n            Object(_utils_events__WEBPACK_IMPORTED_MODULE_2__[\"on\"])(this.recorder, 'stop', () => {\n                const blob = new Blob(chunks, { type: 'audio/webm' });\n                resolve(URL.createObjectURL(blob));\n            });\n            this.recorder.start(1000);\n        });\n    }\n    pauseRecording() {\n        this.recorder.pause();\n    }\n    resumeRecording() {\n        this.recorder.resume();\n    }\n    async endRecording() {\n        this.recorder.stop();\n        return this.promise;\n    }\n}\nclass AudioConfigureComponent extends _recorder__WEBPACK_IMPORTED_MODULE_1__[\"RecorderConfigureComponent\"] {\n    render() {\n        const classNames = ['recorder-plugin-icon'];\n        if (this.state.active)\n            classNames.push('active');\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin\", title: \"Record audio\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: classNames.join(' '), height: \"36\", width: \"36\", viewBox: \"0 0 100 100\", onClick: this.toggleActive },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { height: \"100\", width: \"100\", fill: this.state.active ? 'red' : '#222' }),\n                audioIcon),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"recorder-plugin-name\" }, \"Audio\")));\n    }\n}\nfunction AudioSaveComponent(props) {\n    return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { key: \"head\", scope: \"row\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 100 100\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { height: \"100\", width: \"100\", fill: \"#222\" }),\n                audioIcon)),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: \"cell\" }, props.data ?\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"a\", { download: \"audio.webm\", href: props.data }, \"Download Audio\") :\n            \"Audio not yet available\")));\n}\nconst AudioRecorderPlugin = {\n    name: \"AudioRecorder\",\n    recorder: AudioRecorder,\n    configureComponent: AudioConfigureComponent,\n    saveComponent: AudioSaveComponent\n};\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorders/audio-recorder.tsx?");

/***/ }),

/***/ "./src/recorders/cue-recorder.tsx":
/*!****************************************!*\
  !*** ./src/recorders/cue-recorder.tsx ***!
  \****************************************/
/*! exports provided: CueRecorder, CueConfigureComponent, CueSaveComponent, CueRecorderPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CueRecorder\", function() { return CueRecorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CueConfigureComponent\", function() { return CueConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CueSaveComponent\", function() { return CueSaveComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CueRecorderPlugin\", function() { return CueRecorderPlugin; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../recorder */ \"./src/recorder.tsx\");\n/* harmony import */ var _utils_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/events */ \"./src/utils/events.ts\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst { bind } = ractive_player__WEBPACK_IMPORTED_MODULE_3__[\"Utils\"].misc, { formatTimeMs } = ractive_player__WEBPACK_IMPORTED_MODULE_3__[\"Utils\"].time;\nconst cueIcon = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"text\", { fill: \"#FFF\", fontFamily: \"Helvetica\", fontSize: \"75\", textAnchor: \"middle\", x: \"50\", y: \"75\" }, \"Q\"));\nclass CueRecorder {\n    constructor(player) {\n        this.player = player;\n        bind(this, ['onKeyDown']);\n    }\n    beginRecording(time) {\n        this.cueCapture = [];\n        this.lastTime = 0;\n        this.captureStart = time;\n        this.paused = false;\n        this.pauseTime = 0;\n        Object(_utils_events__WEBPACK_IMPORTED_MODULE_2__[\"on\"])(document.body, 'keydown', this.onKeyDown);\n    }\n    pauseRecording(time) {\n        this.paused = true;\n        this.lastPauseTime = time;\n    }\n    resumeRecording(time) {\n        this.pauseTime += time - this.lastPauseTime;\n        this.paused = false;\n    }\n    async endRecording() {\n        Object(_utils_events__WEBPACK_IMPORTED_MODULE_2__[\"off\"])(document.body, 'keydown', this.onKeyDown);\n        this.captureCues(this.player.script.slideName);\n        return this.cueCapture;\n    }\n    onKeyDown(e) {\n        if (this.paused)\n            return;\n        const { script } = this.player;\n        if (!this.player.$controls.captureKeys)\n            return;\n        if (e.key.toLowerCase() === 'e')\n            this.captureCues(script.slides[script.slideIndex - 1][0]);\n    }\n    captureCues(slideName) {\n        const t = performance.now() - this.captureStart - this.pauseTime;\n        this.cueCapture.push([slideName, formatTimeMs(t - this.lastTime)]);\n        this.lastTime = t;\n    }\n}\nclass CueConfigureComponent extends _recorder__WEBPACK_IMPORTED_MODULE_1__[\"RecorderConfigureComponent\"] {\n    render() {\n        const classNames = ['recorder-plugin-icon'];\n        if (this.state.active)\n            classNames.push('active');\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin\", title: \"Record cues\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: classNames.join(' '), height: \"36\", width: \"36\", viewBox: \"0 0 100 100\", onClick: this.toggleActive },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { height: \"100\", width: \"100\", fill: this.state.active ? 'red' : '#222' }),\n                cueIcon),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"recorder-plugin-name\" }, \"Cues\")));\n    }\n}\nfunction CueSaveComponent(props) {\n    return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { key: \"head\", scope: \"row\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 100 100\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { height: \"100\", width: \"100\", fill: \"#222\" }),\n                cueIcon)),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: \"cell\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { readOnly: true, value: JSON.stringify(props.data) }))));\n}\nconst CueRecorderPlugin = {\n    name: \"CueRecorder\",\n    recorder: CueRecorder,\n    configureComponent: CueConfigureComponent,\n    saveComponent: CueSaveComponent\n};\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorders/cue-recorder.tsx?");

/***/ }),

/***/ "./src/recorders/cursor-recorder.tsx":
/*!*******************************************!*\
  !*** ./src/recorders/cursor-recorder.tsx ***!
  \*******************************************/
/*! exports provided: CursorRecorder, CursorConfigureComponent, CursorSaveComponent, CursorRecorderPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CursorRecorder\", function() { return CursorRecorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CursorConfigureComponent\", function() { return CursorConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CursorSaveComponent\", function() { return CursorSaveComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CursorRecorderPlugin\", function() { return CursorRecorderPlugin; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../recorder */ \"./src/recorder.tsx\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom */ \"./src/utils/dom.ts\");\n/* harmony import */ var _utils_events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/events */ \"./src/utils/events.ts\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst { bind } = ractive_player__WEBPACK_IMPORTED_MODULE_4__[\"Utils\"].misc;\nclass CursorRecorder {\n    constructor() {\n        bind(this, ['captureMouse']);\n    }\n    beginRecording(baseTime) {\n        this.captureData = [];\n        this.captureStart = baseTime;\n        this.pauseTime = 0;\n        this.paused = false;\n        Object(_utils_events__WEBPACK_IMPORTED_MODULE_3__[\"on\"])(document.body, 'mousemove', this.captureMouse);\n    }\n    pauseRecording(time) {\n        this.paused = true;\n        this.lastPauseTime = time;\n    }\n    resumeRecording(time) {\n        this.pauseTime += time - this.lastPauseTime;\n        this.paused = false;\n    }\n    async endRecording() {\n        Object(_utils_events__WEBPACK_IMPORTED_MODULE_3__[\"off\"])(document.body, 'mousemove', this.captureMouse);\n        for (let i = this.captureData.length - 1; i >= 1; --i) {\n            this.captureData[i][0] -= this.captureData[i - 1][0];\n        }\n        for (let i = 0; i < this.captureData.length; ++i) {\n            this.captureData[i][0] = formatNum(this.captureData[i][0]);\n        }\n        return this.captureData;\n    }\n    captureMouse(e) {\n        if (this.paused)\n            return;\n        const { left, top } = Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__[\"$\"])('.rp-canvas').getBoundingClientRect(), vmin = Math.min(innerWidth, innerHeight);\n        this.captureData.push([\n            this.getTime(),\n            [\n                (e.pageX - left) / vmin * 100,\n                (e.pageY - top) / vmin * 100\n            ].map(formatNum)\n        ]);\n    }\n    getTime() {\n        return performance.now() - this.captureStart - this.pauseTime;\n    }\n}\nclass CursorConfigureComponent extends _recorder__WEBPACK_IMPORTED_MODULE_1__[\"RecorderConfigureComponent\"] {\n    render() {\n        const classNames = ['recorder-plugin-icon'];\n        if (this.state.active)\n            classNames.push('active');\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin\", title: \"Record cursor\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin-icon\", style: { backgroundColor: this.state.active ? 'red' : '#222', height: '36px', lineHeight: '36px', width: '36px' } },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"img\", { height: \"28\", width: \"28\", src: \"/img/cursor-large.png\", onClick: this.toggleActive, style: { verticalAlign: 'middle' } })),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"recorder-plugin-name\" }, \"Cursor\")));\n    }\n}\nfunction CursorSaveComponent(props) {\n    console.log(props);\n    return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { key: \"head\", scope: \"row\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"img\", { className: \"recorder-plugin-icon\", height: \"28\", width: \"28\", src: \"/img/cursor-large.png\" })),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: \"cell\" }, props.data ?\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { readOnly: true, value: JSON.stringify(props.data) }) :\n            \"Cursor data not yet available.\")));\n}\nconst CursorRecorderPlugin = {\n    name: \"CursorRecorder\",\n    recorder: CursorRecorder,\n    configureComponent: CursorConfigureComponent,\n    saveComponent: CursorSaveComponent\n};\nfunction offsetParent(node) {\n    if (node.offsetLeft !== undefined && node.offsetTop !== undefined)\n        return { left: node.offsetLeft, top: node.offsetTop };\n    const rect = node.getBoundingClientRect();\n    let parent = node;\n    while (parent = parent.parentNode) {\n        if (parent.nodeName.toLowerCase() === 'main') {\n            console.log(\"MAIN\");\n        }\n        if (!['absolute', 'relative'].includes(getComputedStyle(parent).position))\n            continue;\n        const prect = parent.getBoundingClientRect();\n        return { left: rect.left - prect.left, top: rect.top - prect.top };\n    }\n    return { left: rect.left, top: rect.top };\n}\nfunction formatNum(x) {\n    return parseFloat(x.toFixed(2));\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorders/cursor-recorder.tsx?");

/***/ }),

/***/ "./src/recorders/input-recorder.tsx":
/*!******************************************!*\
  !*** ./src/recorders/input-recorder.tsx ***!
  \******************************************/
/*! exports provided: InputRecorder, InputConfigureComponent, InputSaveComponent, InputRecorderPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InputRecorder\", function() { return InputRecorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InputConfigureComponent\", function() { return InputConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InputSaveComponent\", function() { return InputSaveComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InputRecorderPlugin\", function() { return InputRecorderPlugin; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../recorder */ \"./src/recorder.tsx\");\n/* harmony import */ var _utils_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/events */ \"./src/utils/events.ts\");\n\n\n\nconst inputIcon = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"text\", { fill: \"#FFF\", fontFamily: \"Helvetica\", fontSize: \"75\", textAnchor: \"middle\", x: \"50\", y: \"75\" }, \"I\"));\nconst targetsSym = Symbol.for(\"InputRecorder targets\");\nconst listenerSym = Symbol.for(\"InputRecorder listener\");\nclass InputRecorder {\n    constructor(player) {\n        this.inputs = player[targetsSym];\n    }\n    beginRecording(baseTime) {\n        this.captureData = new Map();\n        this.captureStart = baseTime;\n        this.pauseTime = 0;\n        this.paused = false;\n        for (const input of this.inputs) {\n            const events = [[0, input.value]];\n            this.captureData.set(input, events);\n            const listener = () => events.push([this.getTime(), input.value]);\n            input[listenerSym] = listener;\n            Object(_utils_events__WEBPACK_IMPORTED_MODULE_2__[\"on\"])(input, \"input\", listener);\n        }\n    }\n    pauseRecording(time) {\n        this.paused = true;\n        this.lastPauseTime = time;\n    }\n    resumeRecording(time) {\n        this.pauseTime += time - this.lastPauseTime;\n        this.paused = false;\n    }\n    async endRecording() {\n        const ret = [];\n        for (const input of this.inputs) {\n            ret.push(this.captureData.get(input));\n            Object(_utils_events__WEBPACK_IMPORTED_MODULE_2__[\"off\"])(input, \"input\", input[listenerSym]);\n        }\n        return ret;\n    }\n    getTime() {\n        return parseFloat((performance.now() - this.captureStart - this.pauseTime).toFixed(2));\n    }\n}\nclass InputConfigureComponent extends _recorder__WEBPACK_IMPORTED_MODULE_1__[\"RecorderConfigureComponent\"] {\n    render() {\n        const classNames = ['recorder-plugin-icon'];\n        if (this.state.active)\n            classNames.push('active');\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin\", title: \"Record input\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 100 100\", onClick: this.toggleActive },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { height: \"100\", width: \"100\", fill: this.state.active ? 'red' : '#222' }),\n                inputIcon),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"recorder-plugin-name\" }, \"Input\")));\n    }\n}\nfunction InputSaveComponent(props) {\n    return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { key: \"head\", scope: \"row\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 100 100\" }, inputIcon)),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: \"cell\" }, props.data ?\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { readOnly: true, value: JSON.stringify(props.data) }) :\n            \"Input data not yet available.\")));\n}\nconst InputRecorderPlugin = {\n    name: \"InputRecorder\",\n    recorder: InputRecorder,\n    configureComponent: InputConfigureComponent,\n    saveComponent: InputSaveComponent\n};\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorders/input-recorder.tsx?");

/***/ }),

/***/ "./src/recorders/key-recorder.tsx":
/*!****************************************!*\
  !*** ./src/recorders/key-recorder.tsx ***!
  \****************************************/
/*! exports provided: default, KeyConfigureComponent, KeySaveComponent, KeyRecorderPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return KeyRecorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KeyConfigureComponent\", function() { return KeyConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KeySaveComponent\", function() { return KeySaveComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KeyRecorderPlugin\", function() { return KeyRecorderPlugin; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../recorder */ \"./src/recorder.tsx\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst { bind, whitelist } = ractive_player__WEBPACK_IMPORTED_MODULE_2__[\"Utils\"].misc;\nconst keyboardIcon = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"g\", null,\n    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"g\", { transform: \"translate(-138.61 -857.23)\" },\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { style: {\n                strokeLinejoin: \"round\",\n                stroke: '#FFF',\n                strokeLinecap: \"round\",\n                strokeWidth: 3.8521,\n                fill: \"#FFF\"\n            }, rx: \"9.4681\", ry: \"14.97\", height: \"58.455\", width: \"121.82\", y: \"931.93\", x: \"171.45\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { style: {\n                stroke: \"#000\",\n                strokeDasharray: \"4.9175124 4.9175124\",\n                strokeWidth: 4.9175,\n                fill: \"none\"\n            }, d: \"m184.06 947.36h94.08\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { style: {\n                stroke: \"#000\",\n                strokeDasharray: \"4.9175124 4.9175124\",\n                strokeWidth: 4.9175,\n                fill: \"none\"\n            }, d: \"m184.06 957.05h94.08\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { style: {\n                stroke: \"#000\",\n                strokeDasharray: \"4.9175124 4.9175124\",\n                strokeWidth: 4.9175,\n                fill: \"none\"\n            }, d: \"m184.06 966.75h94.08\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { style: {\n                stroke: \"#FFF\",\n                strokeWidth: 4.9175,\n                fill: \"none\"\n            }, d: \"m184.06 977.23h94.08\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { style: {\n                stroke: \"#FFF\",\n                strokeLinecap: \"round\",\n                strokeWidth: 4.3986,\n                fill: \"none\"\n            }, d: \"m278.67 929.84s8.86-13.98-0.31-21.47c-10.76-8.79-20.81 8.66-36.55-3.07\" }))));\nconst LOCAL_STORAGE_RECORDINGS_KEY = 'Controls.KeyRecorder recordings';\nclass KeyRecorder {\n    constructor(player) {\n        bind(this, ['captureCursor', 'captureKey', 'captureKeySequence']);\n        this.cm = player[Symbol.for('KeyRecorder target')];\n        console.log(this.cm);\n    }\n    beginRecording(baseTime) {\n        this.captureStart = baseTime;\n        this.captureData = [];\n        this.paused = false;\n        this.pauseTime = 0;\n        this.cm.on('change', this.captureKey);\n        this.cm.on('cursorActivity', this.captureCursor);\n        this.cm.on('keyHandled', this.captureKeySequence);\n    }\n    pauseRecording(time) {\n        this.paused = true;\n        this.lastPauseTime = time;\n    }\n    resumeRecording(time) {\n        this.pauseTime += time - this.lastPauseTime;\n        this.paused = false;\n    }\n    async endRecording() {\n        this.cm.off('change', this.captureKey);\n        this.cm.off('cursorActivity', this.captureCursor);\n        this.cm.off('keyHandled', this.captureKeySequence);\n        for (let i = this.captureData.length - 1; i >= 1; --i) {\n            this.captureData[i][0] -= this.captureData[i - 1][0];\n        }\n        for (let i = 0; i < this.captureData.length; ++i) {\n            this.captureData[i][0] = formatNum(this.captureData[i][0]);\n        }\n        return this.captureData;\n    }\n    captureCursor(cm) {\n        if (this.paused)\n            return;\n        const selection = cm.getDoc().listSelections()[0], anchor = whitelist(selection.anchor, ['line', 'ch']), head = whitelist(selection.head, ['line', 'ch']);\n        if (anchor.line === head.line && anchor.ch === head.ch) {\n            this.captureData.push([\n                this.getTime(),\n                ['cursor', whitelist(anchor, ['line', 'ch'])]\n            ]);\n        }\n        else {\n            this.captureData.push([\n                this.getTime(),\n                ['selection', { anchor, head }]\n            ]);\n        }\n    }\n    ;\n    captureKey(cm, { from, to, text, removed, origin }) {\n        if (this.paused)\n            return;\n        this.captureData.push([\n            this.getTime(),\n            [\n                'text',\n                {\n                    from: whitelist(from, ['line', 'ch']),\n                    to: whitelist(to, ['line', 'ch']),\n                    text,\n                    removed\n                }\n            ]\n        ]);\n    }\n    captureKeySequence(cm, sequence) {\n        if (this.paused)\n            return;\n        this.captureData.push([this.getTime(), ['command', sequence]]);\n    }\n    getTime() {\n        return performance.now() - this.captureStart - this.pauseTime;\n    }\n}\nclass KeyConfigureComponent extends _recorder__WEBPACK_IMPORTED_MODULE_1__[\"RecorderConfigureComponent\"] {\n    render() {\n        const classNames = ['recorder-plugin-icon'];\n        if (this.state.active)\n            classNames.push('active');\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin\", title: \"Record keys\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 187.5 187.5\", onClick: this.toggleActive },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { x: \"0\", y: \"0\", height: \"187.5\", width: \"187.5\", fill: this.state.active ? \"red\" : \"#222\" }),\n                keyboardIcon),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"recorder-plugin-name\" }, \"Keys\")));\n    }\n}\nfunction KeySaveComponent(props) {\n    return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { key: \"head\", scope: \"row\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 187.5 187.5\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { x: \"0\", y: \"0\", height: \"187.5\", width: \"187.5\", fill: \"#222\" }),\n                keyboardIcon)),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: \"cell\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { readOnly: true, value: JSON.stringify(props.data) }))));\n}\nconst KeyRecorderPlugin = {\n    name: \"KeyRecorder\",\n    recorder: KeyRecorder,\n    configureComponent: KeyConfigureComponent,\n    saveComponent: KeySaveComponent\n};\nfunction formatNum(x) {\n    return parseFloat(x.toFixed(2));\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorders/key-recorder.tsx?");

/***/ }),

/***/ "./src/recorders/play-recorder.tsx":
/*!*****************************************!*\
  !*** ./src/recorders/play-recorder.tsx ***!
  \*****************************************/
/*! exports provided: PlayRecorder, PlayConfigureComponent, PlaySaveComponent, PlayRecorderPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayRecorder\", function() { return PlayRecorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayConfigureComponent\", function() { return PlayConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlaySaveComponent\", function() { return PlaySaveComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayRecorderPlugin\", function() { return PlayRecorderPlugin; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../recorder */ \"./src/recorder.tsx\");\n\n\nconst playIcon = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { d: \"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z\", fill: \"white\" }));\nclass PlayRecorder {\n    constructor(player) {\n        this.player = player;\n    }\n    beginRecording(baseTime) {\n        this.player.playback.play();\n    }\n    async endRecording() {\n        this.player.playback.pause();\n    }\n    pauseRecording() { }\n    resumeRecording() { }\n}\nclass PlayConfigureComponent extends _recorder__WEBPACK_IMPORTED_MODULE_1__[\"RecorderConfigureComponent\"] {\n    render() {\n        const classNames = ['recorder-plugin-icon'];\n        if (this.state.active)\n            classNames.push('active');\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin\", title: \"Play video when recording starts\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: classNames.join(' '), height: \"36\", width: \"36\", viewBox: \"0 0 36 36\", onClick: this.toggleActive },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { height: \"100\", width: \"100\", fill: this.state.active ? 'red' : '#222' }),\n                playIcon),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"recorder-plugin-name\" }, \"Play\")));\n    }\n}\nfunction PlaySaveComponent() {\n    return null;\n}\nconst PlayRecorderPlugin = {\n    name: \"PlayRecorder\",\n    recorder: PlayRecorder,\n    configureComponent: PlayConfigureComponent,\n    saveComponent: PlaySaveComponent\n};\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorders/play-recorder.tsx?");

/***/ }),

/***/ "./src/recorders/state-recorder.tsx":
/*!******************************************!*\
  !*** ./src/recorders/state-recorder.tsx ***!
  \******************************************/
/*! exports provided: StateRecorder, StateConfigureComponent, StateSaveComponent, StateRecorderPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StateRecorder\", function() { return StateRecorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StateConfigureComponent\", function() { return StateConfigureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StateSaveComponent\", function() { return StateSaveComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StateRecorderPlugin\", function() { return StateRecorderPlugin; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../recorder */ \"./src/recorder.tsx\");\n\n\nconst stateIcon = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"text\", { fill: \"#FFF\", fontFamily: \"Helvetica\", fontSize: \"75\", textAnchor: \"middle\", x: \"50\", y: \"75\" }, \"R\"));\nconst targetsSym = Symbol.for(\"StateRecorder targets\");\nconst listenerSym = Symbol.for(\"StateRecorder listener\");\nclass StateRecorder {\n    constructor(player) {\n        this.components = player[targetsSym];\n    }\n    beginRecording(time) {\n        this.captureData = new Map();\n        this.captureStart = time;\n        this.pauseTime = 0;\n        this.paused = false;\n        for (const component of this.components) {\n            const events = [[0, component.state]];\n            this.captureData.set(component, events);\n            const listener = (state) => events.push([this.getTime(), state]);\n            component[listenerSym] = listener;\n        }\n    }\n    async endRecording() {\n        const ret = [];\n        for (const component of this.components) {\n            ret.push(this.captureData.get(component));\n            delete component[listenerSym];\n        }\n        return ret;\n    }\n    pauseRecording(time) {\n        this.paused = true;\n        this.lastPauseTime = time;\n    }\n    resumeRecording(time) {\n        this.pauseTime += time - this.lastPauseTime;\n        this.paused = false;\n    }\n    getTime() {\n        return parseFloat((performance.now() - this.captureStart - this.pauseTime).toFixed(2));\n    }\n}\nclass StateConfigureComponent extends _recorder__WEBPACK_IMPORTED_MODULE_1__[\"RecorderConfigureComponent\"] {\n    render() {\n        const classNames = ['recorder-plugin-icon'];\n        if (this.state.active)\n            classNames.push('active');\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"recorder-plugin\", title: \"Record state of React component\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 100 100\", onClick: this.toggleActive },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", { height: \"100\", width: \"100\", fill: this.state.active ? 'red' : '#222' }),\n                stateIcon),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"recorder-plugin-name\" }, \"State\")));\n    }\n}\nfunction StateSaveComponent(props) {\n    return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { key: \"head\", scope: \"row\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: \"recorder-plugin-icon\", height: \"36\", width: \"36\", viewBox: \"0 0 100 100\" }, stateIcon)),\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: \"cell\" }, props.data ?\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { readOnly: true, value: JSON.stringify(props.data) }) :\n            \"State data not yet available.\")));\n}\nconst StateRecorderPlugin = {\n    name: \"StateRecorder\",\n    recorder: StateRecorder,\n    configureComponent: StateConfigureComponent,\n    saveComponent: StateSaveComponent\n};\n\n\n//# sourceURL=webpack://RactiveEditor/./src/recorders/state-recorder.tsx?");

/***/ }),

/***/ "./src/thumb-recorder.tsx":
/*!********************************!*\
  !*** ./src/thumb-recorder.tsx ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ThumbRecorder; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/dom */ \"./src/utils/dom.ts\");\n/* harmony import */ var _polyfills__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./polyfills */ \"./src/polyfills.ts\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ractive-player */ \"ractive-player\");\n/* harmony import */ var ractive_player__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ractive_player__WEBPACK_IMPORTED_MODULE_3__);\n\n\nconst { $, $$ } = _utils_dom__WEBPACK_IMPORTED_MODULE_1__;\n\n\nconst { bind, waitFor } = ractive_player__WEBPACK_IMPORTED_MODULE_3__[\"Utils\"].misc;\nconst sleep = ractive_player__WEBPACK_IMPORTED_MODULE_3__[\"Utils\"].misc.wait;\nconst THUMB_OPTIONS = {\n    cols: 5,\n    rows: 5,\n    height: 100,\n    width: 160,\n    frequency: 4\n};\nclass ThumbRecorder extends ractive_player__WEBPACK_IMPORTED_MODULE_3__[\"Player\"].PureReceiver {\n    constructor(props) {\n        super(props);\n        this.player = props.player;\n        bind(this, ['recordThumbs', 'togglePane']);\n        this.state = {\n            paneOpen: false,\n            sheets: []\n        };\n    }\n    componentDidMount() {\n        if (!window.hasOwnProperty('RACTIVE_GLOBAL'))\n            window.RACTIVE_GLOBAL = {};\n        RACTIVE_GLOBAL.Controls = RACTIVE_GLOBAL.Controls || {};\n        RACTIVE_GLOBAL.Controls.ThumbRecorder = this;\n    }\n    async recordThumbs() {\n        const extensionId = \"mokgmmlldhhiafndljjdiaegiffnfogo\";\n        const wasFullScreen = Object(_polyfills__WEBPACK_IMPORTED_MODULE_2__[\"isFullScreen\"])();\n        const api = await wrapPortMaster(chrome.runtime.connect(extensionId));\n        const { cols, rows, height, width, frequency } = THUMB_OPTIONS;\n        const thumbs = [];\n        Object(_polyfills__WEBPACK_IMPORTED_MODULE_2__[\"requestFullScreen\"])();\n        await waitFor(() => Object(_polyfills__WEBPACK_IMPORTED_MODULE_2__[\"isFullScreen\"])());\n        const oldState = hideUI();\n        await sleep(6000);\n        const { playback } = this.player;\n        for (let t = 0, len = playback.length; t <= len; t += frequency * 1000) {\n            playback.seek(t);\n            await sleep(100);\n            thumbs.push(await api.captureTab());\n        }\n        if (!wasFullScreen)\n            Object(_polyfills__WEBPACK_IMPORTED_MODULE_2__[\"exitFullScreen\"])();\n        restoreUI(oldState);\n        const sheets = await processThumbs(thumbs);\n        this.setState({\n            sheets\n        });\n    }\n    togglePane() {\n        this.setState({\n            paneOpen: !this.state.paneOpen\n        });\n    }\n    render() {\n        const { paneOpen } = this.state;\n        const dialogStyle = {\n            display: paneOpen ? 'block' : 'none'\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: \"editor-thumb-recorder\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: \"saved-thumbs-dialog\", style: dialogStyle },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"button\", { onClick: this.recordThumbs }, \"Record\"),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: \"sheets\" }, this.state.sheets.map((sheet, i) => (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"a\", { key: i, href: sheet, download: `${i}.png` },\n                    \"Sheet \",\n                    i))))),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { onClick: this.togglePane, height: \"36\", width: \"36\", viewBox: \"0 0 100 100\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { d: \"M 10 70 a 1,1 0 0,1 80,0 z\", fill: \"#FFC0CB\", stroke: \"#FFF\", strokeWidth: \"7\" }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", { d: \"M 35 66.5 a 1,1 0 0,1 30,0 z\", fill: \"#FFE0EB\", stroke: \"none\" }))));\n    }\n}\nfunction wrapPortMaster(port) {\n    let callCounter = 0;\n    const returnPromises = {};\n    return new Promise((resolve, reject) => {\n        port.onMessage.addListener((msg) => {\n            switch (msg.type) {\n                case 'apiDefinition':\n                    const api = {};\n                    msg.methodNames.forEach(name => {\n                        api[name] = (...args) => {\n                            const callId = callCounter++;\n                            port.postMessage({ type: 'apiCall', callId, methodName: name, arguments: args });\n                            return new Promise((resolve, reject) => {\n                                returnPromises[callId] = resolve;\n                            });\n                        };\n                    });\n                    Object.freeze(api);\n                    resolve(api);\n                    break;\n                case 'apiReturn':\n                    const { callId } = msg;\n                    returnPromises[callId](msg.value);\n                    delete returnPromises[callId];\n                    break;\n            }\n        });\n        port.postMessage({ type: 'establish' });\n    });\n}\nfunction hideUI() {\n    const changes = [\n        [$('.rp-controls'), 'display', 'none'],\n        [$('.rp-canvas'), 'cursor', 'none'],\n        [document.body, 'cursor', 'none']\n    ];\n    for (let i = 0; i < changes.length; ++i) {\n        const [elt, prop, val] = changes[i];\n        changes[i][2] = elt.style[prop];\n        elt.style[prop] = val;\n    }\n    return changes;\n}\nfunction restoreUI(oldState) {\n    for (let [elt, prop, val] of oldState) {\n        elt.style[prop] = val;\n    }\n}\nasync function processThumbs(thumbs) {\n    const { rows, cols, height, width } = THUMB_OPTIONS, count = rows * cols;\n    const canvas = _utils_dom__WEBPACK_IMPORTED_MODULE_1__[\"elt\"]('canvas');\n    canvas.setAttribute('width', (width * cols).toString());\n    canvas.setAttribute('height', (height * rows).toString());\n    const ctx = canvas.getContext('2d');\n    const sheets = [];\n    for (let sheetNum = 0, len = Math.ceil(thumbs.length / count); sheetNum < len; ++sheetNum) {\n        ctx.clearRect(0, 0, width * cols, height * rows);\n        const sheetImgs = await Promise.all(thumbs\n            .slice(sheetNum * count, (sheetNum + 1) * count)\n            .map(dataURI => {\n            return new Promise((resolve, reject) => {\n                const img = _utils_dom__WEBPACK_IMPORTED_MODULE_1__[\"elt\"]('img');\n                img.onload = () => resolve(img);\n                img.src = dataURI;\n            });\n        }));\n        for (let i = 0; i < rows; ++i) {\n            for (let j = 0; j < cols; ++j) {\n                const index = i * cols + j;\n                if (index >= sheetImgs.length)\n                    break;\n                ctx.drawImage(sheetImgs[index], j * width, i * height, width, height);\n            }\n        }\n        sheets.push(canvas.toDataURL(\"image/png\"));\n    }\n    return sheets;\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/thumb-recorder.tsx?");

/***/ }),

/***/ "./src/utils/dom.ts":
/*!**************************!*\
  !*** ./src/utils/dom.ts ***!
  \**************************/
/*! exports provided: $, $$, elt, fragmentFromHTML, remove */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"$\", function() { return $; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"$$\", function() { return $$; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"elt\", function() { return elt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fragmentFromHTML\", function() { return fragmentFromHTML; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"remove\", function() { return remove; });\nfunction $(selector, context = document) {\n    return context.querySelector(selector);\n}\nfunction $$(selector, context = document) {\n    return Array.from(context.querySelectorAll(selector));\n}\nfunction elt(name) {\n    return document.createElement(name);\n}\nfunction fragmentFromHTML(str) {\n    const t = document.createElement('template');\n    t.innerHTML = str;\n    return t.content.cloneNode(true);\n}\nfunction remove(elt) {\n    elt.parentNode.removeChild(elt);\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/utils/dom.ts?");

/***/ }),

/***/ "./src/utils/events.ts":
/*!*****************************!*\
  !*** ./src/utils/events.ts ***!
  \*****************************/
/*! exports provided: off, on */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"off\", function() { return off; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"on\", function() { return on; });\nfunction off(element, type, handler) {\n    return element.removeEventListener(type, handler);\n}\nfunction on(element, ...args) {\n    let [type, selector, handler] = args;\n    if (element instanceof Array) {\n        element.map(elt => on(elt, ...args));\n        return;\n    }\n    if (args.length === 2)\n        handler = selector, selector = null;\n    if (selector) {\n        element.addEventListener(type, (e) => {\n            let target = e.target;\n            while (target != element) {\n                if (target.matches(selector)) {\n                    return handler.call(target, e, target);\n                }\n                target = target.parentNode;\n            }\n        }, true);\n    }\n    else\n        element.addEventListener(type, handler);\n}\n\n\n//# sourceURL=webpack://RactiveEditor/./src/utils/events.ts?");

/***/ }),

/***/ "ractive-player":
/*!********************************!*\
  !*** external "RactivePlayer" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = RactivePlayer;\n\n//# sourceURL=webpack://RactiveEditor/external_%22RactivePlayer%22?");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = React;\n\n//# sourceURL=webpack://RactiveEditor/external_%22React%22?");

/***/ })

/******/ });